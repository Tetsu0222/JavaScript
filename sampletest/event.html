<html>

    <body>

        <script>

            //イベントループ
            //タスクキューに格納されたタスクを順番に実行していく仕組み
            //イベントループは定期的にコールスタックを監視、コールスタックが空の時にタスクキューから一番古いタスクを取り出して実行する。


            let val = 0;

            setTimeout( function task() {   //タスクの登録
                val = 1;
            } , 0 );

            console.log( val ); //値の出力、1ではなく0が出力される。
            //関数taskはコールスタックが空になるまで実行されないため、タスクキューで実行待ちの状態となっている。
            //そのため、初期値のまま出力される。
            

            //ここまで達すると、グローバルコンテキストの消滅


        </script>
        
    </body>

</html>