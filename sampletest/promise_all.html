<html>

    <body>

        <script>

            //Promiseによる並列処理
            //Promise.all()によって、すべての処理を並列で実行、すべての処理の完了を待ってから次の処理へ移る。
            
            function wait( ms ){
                return new Promise( ( resolve , reject ) => {
                    setTimeout( () => {
                        console.log( ms + "処理が完了しました" );
                        resolve( ms );
                    } , ms );      
                });
            }

            const wait400 = wait( 400 );
            const wait500 = wait( 500 );
            const wait600 = wait( 600 );

            //all()メソッドにより、直列ではなく、並列で処理がされる。
            Promise.all( [ wait500 , wait600 , wait400 ] )
                .then( ( [ resolved500 , resolved600 , resolved400 ] ) => {
                    console.log( "すべての処理が完了しました" );
                    console.log( resolved500 , resolved600 , resolved400 );
                });

        </script>
        
    </body>

</html>