<!DOCTYPE html>
<html>

    <body>

        <button id="block">出るボタン</button>
        <button id="none">消えるボタン</button>
        <label id="test" class="test">読み込み完了!!</label>

        <style>
            .test{
                display: none;
            }
        </style>


        <script>

            const blockBt = document.querySelector( "#block" );
            const noneBt = document.querySelector( "#none" );

            blockBt.addEventListener( "click" , async function( event ) {
                const number = await numberFactory;
                console.log( number );
                const result = await is_Error( number );
                console.log( result );
                if( result ){
                    document.getElementById("test").style.display ="block";
                }else{
                    alert( "5未満の数値が生成されました" );
                }
            });

            const numberFactory = new Promise( resolve => {
                setTimeout( () => resolve(Math.random() * 10 ) )
            });

            function is_Error( number ){
                return new Promise( ( resolve ) => {
                    setTimeout( () => {

                        if( number > 3 ){
                            return resolve( true );
                        }
                        return resolve( false );
                    });
                });
            }


            noneBt.addEventListener( "click" , function( event ){
                document.getElementById("test").style.display ="none";
            })

        </script>
        
    </body>

</html>